{"id":"../../app.js","dependencies":[{"name":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\package.json","includedInParent":true,"mtime":1618148497487},{"name":"path","loc":{"line":2,"column":21},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\node_modules\\path-browserify\\index.js"},{"name":"express","loc":{"line":3,"column":24},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\node_modules\\express\\index.js"},{"name":"morgan","loc":{"line":4,"column":23},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\node_modules\\morgan\\index.js"},{"name":"express-rate-limit","loc":{"line":5,"column":26},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\node_modules\\express-rate-limit\\lib\\express-rate-limit.js"},{"name":"helmet","loc":{"line":6,"column":23},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\node_modules\\helmet\\dist\\index.js"},{"name":"express-mongo-sanitize","loc":{"line":7,"column":30},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\node_modules\\express-mongo-sanitize\\index.js"},{"name":"xss-clean","loc":{"line":8,"column":20},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\node_modules\\xss-clean\\lib\\index.js"},{"name":"hpp","loc":{"line":9,"column":20},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\node_modules\\hpp\\lib\\index.js"},{"name":"cookie-parser","loc":{"line":10,"column":29},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\node_modules\\cookie-parser\\index.js"},{"name":"./routes/productRoutes","loc":{"line":12,"column":30},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\routes\\productRoutes.js"},{"name":"./routes/userRoutes","loc":{"line":13,"column":27},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\routes\\userRoutes.js"},{"name":"./routes/viewRoutes","loc":{"line":14,"column":27},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\routes\\viewRoutes.js"},{"name":"./utils/appError","loc":{"line":15,"column":25},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\utils\\appError.js"},{"name":"./controllers/errorController","loc":{"line":16,"column":38},"parent":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\app.js","resolved":"C:\\Users\\Anish\\OneDrive\\Desktop\\ShopMe\\controllers\\errorController.js"}],"generated":{"js":"var __dirname = \"C:\\\\Users\\\\Anish\\\\OneDrive\\\\Desktop\\\\ShopMe\";\n//------- Express Framework ----------//\nvar path = require('path');\n\nvar express = require('express');\n\nvar morgan = require('morgan');\n\nvar rateLimit = require('express-rate-limit'); // rate limiting\n\n\nvar helmet = require('helmet');\n\nvar mongoSanitize = require('express-mongo-sanitize');\n\nvar xss = require('xss-clean');\n\nvar hpp = require('hpp');\n\nvar cookieParser = require('cookie-parser');\n\nvar productRouter = require('./routes/productRoutes');\n\nvar userRouter = require('./routes/userRoutes');\n\nvar viewRouter = require('./routes/viewRoutes');\n\nvar AppError = require('./utils/appError');\n\nvar globalErrorController = require('./controllers/errorController');\n\nvar app = express(); // Setting pug for view template\n\napp.set('view engine', 'pug');\napp.set('views', path.join(__dirname, 'views')); //------------ GLOBAL MIDDLEWARE ---------//\n//------ Serving Static Files -------//\n\napp.use(express.static(path.join(__dirname, 'public'))); // Security HTTP Headers\n//app.use(helmet());\n\nif (\"development\" === 'development' || 'production') {\n  app.use(morgan('dev'));\n} // // Rate Limiting to api request\n// const limiter = rateLimit({\n//   max: 100,\n//   windowMs: 60 * 60 * 1000,\n//   message: 'Too many request, please try again in an hour!!',\n// });\n// // Limiting req only to api route\n// app.use('/api', limiter);\n// Body parser, reading data from body in req.body\n\n\napp.use(express.json());\napp.use(cookieParser()); // It will add cookies to request \n// Data Sanitization against NoSQL query injection\n\napp.use(mongoSanitize()); // Data Sanitization against XSS\n\napp.use(xss()); // Test Middleware\n\napp.use(function (req, res, next) {\n  console.log(req.cookies);\n  next();\n}); //--------- Api Routes ----------//\n\napp.use('/', viewRouter);\napp.use('/api/v1/products', productRouter);\napp.use('/api/v1/users', userRouter); // Handling unhandled request\n// Handling req outside the app.\n\napp.all('*', function (req, res, next) {\n  // Sending Error to global error middleware.\n  next(new AppError(\"Cant find \".concat(req.originalUrl, \" on this server\"), 404));\n}); //--------- GLOBAL ERROR MIDDLEWARE -------//\n\napp.use(globalErrorController);\nmodule.exports = app;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":2,"column":0},"source":"../../app.js","original":{"line":1,"column":0}},{"generated":{"line":3,"column":0},"source":"../../app.js","original":{"line":2,"column":0}},{"name":"path","generated":{"line":3,"column":4},"source":"../../app.js","original":{"line":2,"column":6}},{"generated":{"line":3,"column":8},"source":"../../app.js","original":{"line":2,"column":10}},{"name":"require","generated":{"line":3,"column":11},"source":"../../app.js","original":{"line":2,"column":13}},{"generated":{"line":3,"column":18},"source":"../../app.js","original":{"line":2,"column":20}},{"generated":{"line":3,"column":19},"source":"../../app.js","original":{"line":2,"column":21}},{"generated":{"line":3,"column":25},"source":"../../app.js","original":{"line":2,"column":20}},{"generated":{"line":3,"column":26},"source":"../../app.js","original":{"line":2,"column":0}},{"generated":{"line":5,"column":0},"source":"../../app.js","original":{"line":3,"column":0}},{"name":"express","generated":{"line":5,"column":4},"source":"../../app.js","original":{"line":3,"column":6}},{"generated":{"line":5,"column":11},"source":"../../app.js","original":{"line":3,"column":13}},{"name":"require","generated":{"line":5,"column":14},"source":"../../app.js","original":{"line":3,"column":16}},{"generated":{"line":5,"column":21},"source":"../../app.js","original":{"line":3,"column":23}},{"generated":{"line":5,"column":22},"source":"../../app.js","original":{"line":3,"column":24}},{"generated":{"line":5,"column":31},"source":"../../app.js","original":{"line":3,"column":23}},{"generated":{"line":5,"column":32},"source":"../../app.js","original":{"line":3,"column":0}},{"generated":{"line":7,"column":0},"source":"../../app.js","original":{"line":4,"column":0}},{"name":"morgan","generated":{"line":7,"column":4},"source":"../../app.js","original":{"line":4,"column":6}},{"generated":{"line":7,"column":10},"source":"../../app.js","original":{"line":4,"column":12}},{"name":"require","generated":{"line":7,"column":13},"source":"../../app.js","original":{"line":4,"column":15}},{"generated":{"line":7,"column":20},"source":"../../app.js","original":{"line":4,"column":22}},{"generated":{"line":7,"column":21},"source":"../../app.js","original":{"line":4,"column":23}},{"generated":{"line":7,"column":29},"source":"../../app.js","original":{"line":4,"column":22}},{"generated":{"line":7,"column":30},"source":"../../app.js","original":{"line":4,"column":0}},{"generated":{"line":9,"column":0},"source":"../../app.js","original":{"line":5,"column":0}},{"name":"rateLimit","generated":{"line":9,"column":4},"source":"../../app.js","original":{"line":5,"column":6}},{"generated":{"line":9,"column":13},"source":"../../app.js","original":{"line":5,"column":15}},{"name":"require","generated":{"line":9,"column":16},"source":"../../app.js","original":{"line":5,"column":18}},{"generated":{"line":9,"column":23},"source":"../../app.js","original":{"line":5,"column":25}},{"generated":{"line":9,"column":24},"source":"../../app.js","original":{"line":5,"column":26}},{"generated":{"line":9,"column":44},"source":"../../app.js","original":{"line":5,"column":25}},{"generated":{"line":9,"column":45},"source":"../../app.js","original":{"line":5,"column":0}},{"generated":{"line":9,"column":47},"source":"../../app.js","original":{"line":5,"column":49}},{"generated":{"line":12,"column":0},"source":"../../app.js","original":{"line":6,"column":0}},{"name":"helmet","generated":{"line":12,"column":4},"source":"../../app.js","original":{"line":6,"column":6}},{"generated":{"line":12,"column":10},"source":"../../app.js","original":{"line":6,"column":12}},{"name":"require","generated":{"line":12,"column":13},"source":"../../app.js","original":{"line":6,"column":15}},{"generated":{"line":12,"column":20},"source":"../../app.js","original":{"line":6,"column":22}},{"generated":{"line":12,"column":21},"source":"../../app.js","original":{"line":6,"column":23}},{"generated":{"line":12,"column":29},"source":"../../app.js","original":{"line":6,"column":22}},{"generated":{"line":12,"column":30},"source":"../../app.js","original":{"line":6,"column":0}},{"generated":{"line":14,"column":0},"source":"../../app.js","original":{"line":7,"column":0}},{"name":"mongoSanitize","generated":{"line":14,"column":4},"source":"../../app.js","original":{"line":7,"column":6}},{"generated":{"line":14,"column":17},"source":"../../app.js","original":{"line":7,"column":19}},{"name":"require","generated":{"line":14,"column":20},"source":"../../app.js","original":{"line":7,"column":22}},{"generated":{"line":14,"column":27},"source":"../../app.js","original":{"line":7,"column":29}},{"generated":{"line":14,"column":28},"source":"../../app.js","original":{"line":7,"column":30}},{"generated":{"line":14,"column":52},"source":"../../app.js","original":{"line":7,"column":29}},{"generated":{"line":14,"column":53},"source":"../../app.js","original":{"line":7,"column":0}},{"generated":{"line":16,"column":0},"source":"../../app.js","original":{"line":8,"column":0}},{"name":"xss","generated":{"line":16,"column":4},"source":"../../app.js","original":{"line":8,"column":6}},{"generated":{"line":16,"column":7},"source":"../../app.js","original":{"line":8,"column":9}},{"name":"require","generated":{"line":16,"column":10},"source":"../../app.js","original":{"line":8,"column":12}},{"generated":{"line":16,"column":17},"source":"../../app.js","original":{"line":8,"column":19}},{"generated":{"line":16,"column":18},"source":"../../app.js","original":{"line":8,"column":20}},{"generated":{"line":16,"column":29},"source":"../../app.js","original":{"line":8,"column":19}},{"generated":{"line":16,"column":30},"source":"../../app.js","original":{"line":8,"column":0}},{"generated":{"line":18,"column":0},"source":"../../app.js","original":{"line":9,"column":0}},{"name":"hpp","generated":{"line":18,"column":4},"source":"../../app.js","original":{"line":9,"column":6}},{"generated":{"line":18,"column":7},"source":"../../app.js","original":{"line":9,"column":9}},{"name":"require","generated":{"line":18,"column":10},"source":"../../app.js","original":{"line":9,"column":12}},{"generated":{"line":18,"column":17},"source":"../../app.js","original":{"line":9,"column":19}},{"generated":{"line":18,"column":18},"source":"../../app.js","original":{"line":9,"column":20}},{"generated":{"line":18,"column":23},"source":"../../app.js","original":{"line":9,"column":19}},{"generated":{"line":18,"column":24},"source":"../../app.js","original":{"line":9,"column":0}},{"generated":{"line":20,"column":0},"source":"../../app.js","original":{"line":10,"column":0}},{"name":"cookieParser","generated":{"line":20,"column":4},"source":"../../app.js","original":{"line":10,"column":6}},{"generated":{"line":20,"column":16},"source":"../../app.js","original":{"line":10,"column":18}},{"name":"require","generated":{"line":20,"column":19},"source":"../../app.js","original":{"line":10,"column":21}},{"generated":{"line":20,"column":26},"source":"../../app.js","original":{"line":10,"column":28}},{"generated":{"line":20,"column":27},"source":"../../app.js","original":{"line":10,"column":29}},{"generated":{"line":20,"column":42},"source":"../../app.js","original":{"line":10,"column":28}},{"generated":{"line":20,"column":43},"source":"../../app.js","original":{"line":10,"column":0}},{"generated":{"line":22,"column":0},"source":"../../app.js","original":{"line":12,"column":0}},{"name":"productRouter","generated":{"line":22,"column":4},"source":"../../app.js","original":{"line":12,"column":6}},{"generated":{"line":22,"column":17},"source":"../../app.js","original":{"line":12,"column":19}},{"name":"require","generated":{"line":22,"column":20},"source":"../../app.js","original":{"line":12,"column":22}},{"generated":{"line":22,"column":27},"source":"../../app.js","original":{"line":12,"column":29}},{"generated":{"line":22,"column":28},"source":"../../app.js","original":{"line":12,"column":30}},{"generated":{"line":22,"column":52},"source":"../../app.js","original":{"line":12,"column":29}},{"generated":{"line":22,"column":53},"source":"../../app.js","original":{"line":12,"column":0}},{"generated":{"line":24,"column":0},"source":"../../app.js","original":{"line":13,"column":0}},{"name":"userRouter","generated":{"line":24,"column":4},"source":"../../app.js","original":{"line":13,"column":6}},{"generated":{"line":24,"column":14},"source":"../../app.js","original":{"line":13,"column":16}},{"name":"require","generated":{"line":24,"column":17},"source":"../../app.js","original":{"line":13,"column":19}},{"generated":{"line":24,"column":24},"source":"../../app.js","original":{"line":13,"column":26}},{"generated":{"line":24,"column":25},"source":"../../app.js","original":{"line":13,"column":27}},{"generated":{"line":24,"column":46},"source":"../../app.js","original":{"line":13,"column":26}},{"generated":{"line":24,"column":47},"source":"../../app.js","original":{"line":13,"column":0}},{"generated":{"line":26,"column":0},"source":"../../app.js","original":{"line":14,"column":0}},{"name":"viewRouter","generated":{"line":26,"column":4},"source":"../../app.js","original":{"line":14,"column":6}},{"generated":{"line":26,"column":14},"source":"../../app.js","original":{"line":14,"column":16}},{"name":"require","generated":{"line":26,"column":17},"source":"../../app.js","original":{"line":14,"column":19}},{"generated":{"line":26,"column":24},"source":"../../app.js","original":{"line":14,"column":26}},{"generated":{"line":26,"column":25},"source":"../../app.js","original":{"line":14,"column":27}},{"generated":{"line":26,"column":46},"source":"../../app.js","original":{"line":14,"column":26}},{"generated":{"line":26,"column":47},"source":"../../app.js","original":{"line":14,"column":0}},{"generated":{"line":28,"column":0},"source":"../../app.js","original":{"line":15,"column":0}},{"name":"AppError","generated":{"line":28,"column":4},"source":"../../app.js","original":{"line":15,"column":6}},{"generated":{"line":28,"column":12},"source":"../../app.js","original":{"line":15,"column":14}},{"name":"require","generated":{"line":28,"column":15},"source":"../../app.js","original":{"line":15,"column":17}},{"generated":{"line":28,"column":22},"source":"../../app.js","original":{"line":15,"column":24}},{"generated":{"line":28,"column":23},"source":"../../app.js","original":{"line":15,"column":25}},{"generated":{"line":28,"column":41},"source":"../../app.js","original":{"line":15,"column":24}},{"generated":{"line":28,"column":42},"source":"../../app.js","original":{"line":15,"column":0}},{"generated":{"line":30,"column":0},"source":"../../app.js","original":{"line":16,"column":0}},{"name":"globalErrorController","generated":{"line":30,"column":4},"source":"../../app.js","original":{"line":16,"column":6}},{"generated":{"line":30,"column":25},"source":"../../app.js","original":{"line":16,"column":27}},{"name":"require","generated":{"line":30,"column":28},"source":"../../app.js","original":{"line":16,"column":30}},{"generated":{"line":30,"column":35},"source":"../../app.js","original":{"line":16,"column":37}},{"generated":{"line":30,"column":36},"source":"../../app.js","original":{"line":16,"column":38}},{"generated":{"line":30,"column":67},"source":"../../app.js","original":{"line":16,"column":37}},{"generated":{"line":30,"column":68},"source":"../../app.js","original":{"line":16,"column":0}},{"generated":{"line":32,"column":0},"source":"../../app.js","original":{"line":18,"column":0}},{"name":"app","generated":{"line":32,"column":4},"source":"../../app.js","original":{"line":18,"column":6}},{"generated":{"line":32,"column":7},"source":"../../app.js","original":{"line":18,"column":9}},{"name":"express","generated":{"line":32,"column":10},"source":"../../app.js","original":{"line":18,"column":12}},{"generated":{"line":32,"column":17},"source":"../../app.js","original":{"line":18,"column":19}},{"generated":{"line":32,"column":19},"source":"../../app.js","original":{"line":18,"column":0}},{"generated":{"line":32,"column":21},"source":"../../app.js","original":{"line":20,"column":0}},{"name":"app","generated":{"line":34,"column":0},"source":"../../app.js","original":{"line":21,"column":0}},{"generated":{"line":34,"column":3},"source":"../../app.js","original":{"line":21,"column":3}},{"name":"set","generated":{"line":34,"column":4},"source":"../../app.js","original":{"line":21,"column":4}},{"generated":{"line":34,"column":7},"source":"../../app.js","original":{"line":21,"column":0}},{"generated":{"line":34,"column":8},"source":"../../app.js","original":{"line":21,"column":8}},{"generated":{"line":34,"column":21},"source":"../../app.js","original":{"line":21,"column":0}},{"generated":{"line":34,"column":23},"source":"../../app.js","original":{"line":21,"column":23}},{"generated":{"line":34,"column":28},"source":"../../app.js","original":{"line":21,"column":0}},{"name":"app","generated":{"line":35,"column":0},"source":"../../app.js","original":{"line":22,"column":0}},{"generated":{"line":35,"column":3},"source":"../../app.js","original":{"line":22,"column":3}},{"name":"set","generated":{"line":35,"column":4},"source":"../../app.js","original":{"line":22,"column":4}},{"generated":{"line":35,"column":7},"source":"../../app.js","original":{"line":22,"column":0}},{"generated":{"line":35,"column":8},"source":"../../app.js","original":{"line":22,"column":8}},{"generated":{"line":35,"column":15},"source":"../../app.js","original":{"line":22,"column":0}},{"name":"path","generated":{"line":35,"column":17},"source":"../../app.js","original":{"line":22,"column":17}},{"generated":{"line":35,"column":21},"source":"../../app.js","original":{"line":22,"column":21}},{"name":"join","generated":{"line":35,"column":22},"source":"../../app.js","original":{"line":22,"column":22}},{"generated":{"line":35,"column":26},"source":"../../app.js","original":{"line":22,"column":17}},{"name":"__dirname","generated":{"line":35,"column":27},"source":"../../app.js","original":{"line":22,"column":27}},{"generated":{"line":35,"column":36},"source":"../../app.js","original":{"line":22,"column":17}},{"generated":{"line":35,"column":38},"source":"../../app.js","original":{"line":22,"column":38}},{"generated":{"line":35,"column":45},"source":"../../app.js","original":{"line":22,"column":17}},{"generated":{"line":35,"column":46},"source":"../../app.js","original":{"line":22,"column":0}},{"generated":{"line":35,"column":49},"source":"../../app.js","original":{"line":24,"column":0}},{"generated":{"line":36,"column":0},"source":"../../app.js","original":{"line":26,"column":0}},{"name":"app","generated":{"line":38,"column":0},"source":"../../app.js","original":{"line":27,"column":0}},{"generated":{"line":38,"column":3},"source":"../../app.js","original":{"line":27,"column":3}},{"name":"use","generated":{"line":38,"column":4},"source":"../../app.js","original":{"line":27,"column":4}},{"generated":{"line":38,"column":7},"source":"../../app.js","original":{"line":27,"column":0}},{"name":"express","generated":{"line":38,"column":8},"source":"../../app.js","original":{"line":27,"column":8}},{"generated":{"line":38,"column":15},"source":"../../app.js","original":{"line":27,"column":15}},{"name":"static","generated":{"line":38,"column":16},"source":"../../app.js","original":{"line":27,"column":16}},{"generated":{"line":38,"column":22},"source":"../../app.js","original":{"line":27,"column":8}},{"name":"path","generated":{"line":38,"column":23},"source":"../../app.js","original":{"line":27,"column":23}},{"generated":{"line":38,"column":27},"source":"../../app.js","original":{"line":27,"column":27}},{"name":"join","generated":{"line":38,"column":28},"source":"../../app.js","original":{"line":27,"column":28}},{"generated":{"line":38,"column":32},"source":"../../app.js","original":{"line":27,"column":23}},{"name":"__dirname","generated":{"line":38,"column":33},"source":"../../app.js","original":{"line":27,"column":33}},{"generated":{"line":38,"column":42},"source":"../../app.js","original":{"line":27,"column":23}},{"generated":{"line":38,"column":44},"source":"../../app.js","original":{"line":27,"column":44}},{"generated":{"line":38,"column":52},"source":"../../app.js","original":{"line":27,"column":23}},{"generated":{"line":38,"column":53},"source":"../../app.js","original":{"line":27,"column":8}},{"generated":{"line":38,"column":54},"source":"../../app.js","original":{"line":27,"column":0}},{"generated":{"line":38,"column":57},"source":"../../app.js","original":{"line":29,"column":0}},{"generated":{"line":39,"column":0},"source":"../../app.js","original":{"line":30,"column":0}},{"generated":{"line":41,"column":0},"source":"../../app.js","original":{"line":32,"column":0}},{"generated":{"line":41,"column":4},"source":"../../app.js","original":{"line":32,"column":4}},{"generated":{"line":41,"column":22},"source":"../../app.js","original":{"line":32,"column":29}},{"generated":{"line":41,"column":35},"source":"../../app.js","original":{"line":32,"column":4}},{"generated":{"line":41,"column":39},"source":"../../app.js","original":{"line":32,"column":46}},{"generated":{"line":41,"column":51},"source":"../../app.js","original":{"line":32,"column":0}},{"generated":{"line":41,"column":53},"source":"../../app.js","original":{"line":32,"column":60}},{"name":"app","generated":{"line":42,"column":0},"source":"../../app.js","original":{"line":33,"column":2}},{"name":"app","generated":{"line":42,"column":2},"source":"../../app.js","original":{"line":33,"column":2}},{"generated":{"line":42,"column":5},"source":"../../app.js","original":{"line":33,"column":5}},{"name":"use","generated":{"line":42,"column":6},"source":"../../app.js","original":{"line":33,"column":6}},{"generated":{"line":42,"column":9},"source":"../../app.js","original":{"line":33,"column":2}},{"name":"morgan","generated":{"line":42,"column":10},"source":"../../app.js","original":{"line":33,"column":10}},{"generated":{"line":42,"column":16},"source":"../../app.js","original":{"line":33,"column":16}},{"generated":{"line":42,"column":17},"source":"../../app.js","original":{"line":33,"column":17}},{"generated":{"line":42,"column":22},"source":"../../app.js","original":{"line":33,"column":16}},{"generated":{"line":42,"column":23},"source":"../../app.js","original":{"line":33,"column":2}},{"generated":{"line":43,"column":0},"source":"../../app.js","original":{"line":34,"column":1}},{"generated":{"line":43,"column":2},"source":"../../app.js","original":{"line":36,"column":0}},{"generated":{"line":44,"column":0},"source":"../../app.js","original":{"line":37,"column":0}},{"generated":{"line":45,"column":0},"source":"../../app.js","original":{"line":38,"column":0}},{"generated":{"line":46,"column":0},"source":"../../app.js","original":{"line":39,"column":0}},{"generated":{"line":47,"column":0},"source":"../../app.js","original":{"line":40,"column":0}},{"generated":{"line":48,"column":0},"source":"../../app.js","original":{"line":41,"column":0}},{"generated":{"line":49,"column":0},"source":"../../app.js","original":{"line":42,"column":0}},{"generated":{"line":50,"column":0},"source":"../../app.js","original":{"line":43,"column":0}},{"generated":{"line":51,"column":0},"source":"../../app.js","original":{"line":45,"column":0}},{"name":"app","generated":{"line":54,"column":0},"source":"../../app.js","original":{"line":46,"column":0}},{"generated":{"line":54,"column":3},"source":"../../app.js","original":{"line":46,"column":3}},{"name":"use","generated":{"line":54,"column":4},"source":"../../app.js","original":{"line":46,"column":4}},{"generated":{"line":54,"column":7},"source":"../../app.js","original":{"line":46,"column":0}},{"name":"express","generated":{"line":54,"column":8},"source":"../../app.js","original":{"line":46,"column":8}},{"generated":{"line":54,"column":15},"source":"../../app.js","original":{"line":46,"column":15}},{"name":"json","generated":{"line":54,"column":16},"source":"../../app.js","original":{"line":46,"column":16}},{"generated":{"line":54,"column":20},"source":"../../app.js","original":{"line":46,"column":8}},{"generated":{"line":54,"column":22},"source":"../../app.js","original":{"line":46,"column":0}},{"name":"app","generated":{"line":55,"column":0},"source":"../../app.js","original":{"line":47,"column":0}},{"generated":{"line":55,"column":3},"source":"../../app.js","original":{"line":47,"column":3}},{"name":"use","generated":{"line":55,"column":4},"source":"../../app.js","original":{"line":47,"column":4}},{"generated":{"line":55,"column":7},"source":"../../app.js","original":{"line":47,"column":0}},{"name":"cookieParser","generated":{"line":55,"column":8},"source":"../../app.js","original":{"line":47,"column":8}},{"generated":{"line":55,"column":20},"source":"../../app.js","original":{"line":47,"column":20}},{"generated":{"line":55,"column":22},"source":"../../app.js","original":{"line":47,"column":0}},{"generated":{"line":55,"column":25},"source":"../../app.js","original":{"line":47,"column":25}},{"generated":{"line":56,"column":0},"source":"../../app.js","original":{"line":49,"column":0}},{"name":"app","generated":{"line":58,"column":0},"source":"../../app.js","original":{"line":50,"column":0}},{"generated":{"line":58,"column":3},"source":"../../app.js","original":{"line":50,"column":3}},{"name":"use","generated":{"line":58,"column":4},"source":"../../app.js","original":{"line":50,"column":4}},{"generated":{"line":58,"column":7},"source":"../../app.js","original":{"line":50,"column":0}},{"name":"mongoSanitize","generated":{"line":58,"column":8},"source":"../../app.js","original":{"line":50,"column":8}},{"generated":{"line":58,"column":21},"source":"../../app.js","original":{"line":50,"column":21}},{"generated":{"line":58,"column":23},"source":"../../app.js","original":{"line":50,"column":0}},{"generated":{"line":58,"column":26},"source":"../../app.js","original":{"line":52,"column":0}},{"name":"app","generated":{"line":60,"column":0},"source":"../../app.js","original":{"line":53,"column":0}},{"generated":{"line":60,"column":3},"source":"../../app.js","original":{"line":53,"column":3}},{"name":"use","generated":{"line":60,"column":4},"source":"../../app.js","original":{"line":53,"column":4}},{"generated":{"line":60,"column":7},"source":"../../app.js","original":{"line":53,"column":0}},{"name":"xss","generated":{"line":60,"column":8},"source":"../../app.js","original":{"line":53,"column":8}},{"generated":{"line":60,"column":11},"source":"../../app.js","original":{"line":53,"column":11}},{"generated":{"line":60,"column":13},"source":"../../app.js","original":{"line":53,"column":0}},{"generated":{"line":60,"column":16},"source":"../../app.js","original":{"line":55,"column":0}},{"name":"app","generated":{"line":62,"column":0},"source":"../../app.js","original":{"line":56,"column":0}},{"generated":{"line":62,"column":3},"source":"../../app.js","original":{"line":56,"column":3}},{"name":"use","generated":{"line":62,"column":4},"source":"../../app.js","original":{"line":56,"column":4}},{"generated":{"line":62,"column":7},"source":"../../app.js","original":{"line":56,"column":0}},{"generated":{"line":62,"column":8},"source":"../../app.js","original":{"line":56,"column":8}},{"name":"req","generated":{"line":62,"column":18},"source":"../../app.js","original":{"line":56,"column":9}},{"generated":{"line":62,"column":21},"source":"../../app.js","original":{"line":56,"column":8}},{"name":"res","generated":{"line":62,"column":23},"source":"../../app.js","original":{"line":56,"column":14}},{"generated":{"line":62,"column":26},"source":"../../app.js","original":{"line":56,"column":8}},{"name":"next","generated":{"line":62,"column":28},"source":"../../app.js","original":{"line":56,"column":19}},{"generated":{"line":62,"column":32},"source":"../../app.js","original":{"line":56,"column":8}},{"generated":{"line":62,"column":34},"source":"../../app.js","original":{"line":56,"column":28}},{"name":"console","generated":{"line":63,"column":0},"source":"../../app.js","original":{"line":57,"column":2}},{"name":"console","generated":{"line":63,"column":2},"source":"../../app.js","original":{"line":57,"column":2}},{"generated":{"line":63,"column":9},"source":"../../app.js","original":{"line":57,"column":9}},{"name":"log","generated":{"line":63,"column":10},"source":"../../app.js","original":{"line":57,"column":10}},{"generated":{"line":63,"column":13},"source":"../../app.js","original":{"line":57,"column":2}},{"name":"req","generated":{"line":63,"column":14},"source":"../../app.js","original":{"line":57,"column":14}},{"generated":{"line":63,"column":17},"source":"../../app.js","original":{"line":57,"column":17}},{"name":"cookies","generated":{"line":63,"column":18},"source":"../../app.js","original":{"line":57,"column":18}},{"generated":{"line":63,"column":25},"source":"../../app.js","original":{"line":57,"column":2}},{"name":"next","generated":{"line":64,"column":0},"source":"../../app.js","original":{"line":58,"column":2}},{"name":"next","generated":{"line":64,"column":2},"source":"../../app.js","original":{"line":58,"column":2}},{"generated":{"line":64,"column":6},"source":"../../app.js","original":{"line":58,"column":6}},{"generated":{"line":65,"column":0},"source":"../../app.js","original":{"line":59,"column":1}},{"generated":{"line":65,"column":1},"source":"../../app.js","original":{"line":56,"column":0}},{"generated":{"line":65,"column":4},"source":"../../app.js","original":{"line":61,"column":0}},{"name":"app","generated":{"line":67,"column":0},"source":"../../app.js","original":{"line":62,"column":0}},{"generated":{"line":67,"column":3},"source":"../../app.js","original":{"line":62,"column":3}},{"name":"use","generated":{"line":67,"column":4},"source":"../../app.js","original":{"line":62,"column":4}},{"generated":{"line":67,"column":7},"source":"../../app.js","original":{"line":62,"column":0}},{"generated":{"line":67,"column":8},"source":"../../app.js","original":{"line":62,"column":8}},{"generated":{"line":67,"column":11},"source":"../../app.js","original":{"line":62,"column":0}},{"name":"viewRouter","generated":{"line":67,"column":13},"source":"../../app.js","original":{"line":62,"column":13}},{"generated":{"line":67,"column":23},"source":"../../app.js","original":{"line":62,"column":0}},{"name":"app","generated":{"line":68,"column":0},"source":"../../app.js","original":{"line":63,"column":0}},{"generated":{"line":68,"column":3},"source":"../../app.js","original":{"line":63,"column":3}},{"name":"use","generated":{"line":68,"column":4},"source":"../../app.js","original":{"line":63,"column":4}},{"generated":{"line":68,"column":7},"source":"../../app.js","original":{"line":63,"column":0}},{"generated":{"line":68,"column":8},"source":"../../app.js","original":{"line":63,"column":8}},{"generated":{"line":68,"column":26},"source":"../../app.js","original":{"line":63,"column":0}},{"name":"productRouter","generated":{"line":68,"column":28},"source":"../../app.js","original":{"line":63,"column":28}},{"generated":{"line":68,"column":41},"source":"../../app.js","original":{"line":63,"column":0}},{"name":"app","generated":{"line":69,"column":0},"source":"../../app.js","original":{"line":64,"column":0}},{"generated":{"line":69,"column":3},"source":"../../app.js","original":{"line":64,"column":3}},{"name":"use","generated":{"line":69,"column":4},"source":"../../app.js","original":{"line":64,"column":4}},{"generated":{"line":69,"column":7},"source":"../../app.js","original":{"line":64,"column":0}},{"generated":{"line":69,"column":8},"source":"../../app.js","original":{"line":64,"column":8}},{"generated":{"line":69,"column":23},"source":"../../app.js","original":{"line":64,"column":0}},{"name":"userRouter","generated":{"line":69,"column":25},"source":"../../app.js","original":{"line":64,"column":25}},{"generated":{"line":69,"column":35},"source":"../../app.js","original":{"line":64,"column":0}},{"generated":{"line":69,"column":38},"source":"../../app.js","original":{"line":66,"column":0}},{"generated":{"line":70,"column":0},"source":"../../app.js","original":{"line":67,"column":0}},{"name":"app","generated":{"line":72,"column":0},"source":"../../app.js","original":{"line":68,"column":0}},{"generated":{"line":72,"column":3},"source":"../../app.js","original":{"line":68,"column":3}},{"name":"all","generated":{"line":72,"column":4},"source":"../../app.js","original":{"line":68,"column":4}},{"generated":{"line":72,"column":7},"source":"../../app.js","original":{"line":68,"column":0}},{"generated":{"line":72,"column":8},"source":"../../app.js","original":{"line":68,"column":8}},{"generated":{"line":72,"column":11},"source":"../../app.js","original":{"line":68,"column":0}},{"generated":{"line":72,"column":13},"source":"../../app.js","original":{"line":68,"column":13}},{"name":"req","generated":{"line":72,"column":23},"source":"../../app.js","original":{"line":68,"column":14}},{"generated":{"line":72,"column":26},"source":"../../app.js","original":{"line":68,"column":13}},{"name":"res","generated":{"line":72,"column":28},"source":"../../app.js","original":{"line":68,"column":19}},{"generated":{"line":72,"column":31},"source":"../../app.js","original":{"line":68,"column":13}},{"name":"next","generated":{"line":72,"column":33},"source":"../../app.js","original":{"line":68,"column":24}},{"generated":{"line":72,"column":37},"source":"../../app.js","original":{"line":68,"column":13}},{"generated":{"line":72,"column":39},"source":"../../app.js","original":{"line":68,"column":33}},{"generated":{"line":73,"column":0},"source":"../../app.js","original":{"line":69,"column":2}},{"name":"next","generated":{"line":74,"column":0},"source":"../../app.js","original":{"line":70,"column":2}},{"name":"next","generated":{"line":74,"column":2},"source":"../../app.js","original":{"line":70,"column":2}},{"generated":{"line":74,"column":6},"source":"../../app.js","original":{"line":70,"column":6}},{"generated":{"line":74,"column":7},"source":"../../app.js","original":{"line":70,"column":7}},{"name":"AppError","generated":{"line":74,"column":11},"source":"../../app.js","original":{"line":70,"column":11}},{"generated":{"line":74,"column":19},"source":"../../app.js","original":{"line":70,"column":7}},{"name":"req","generated":{"line":74,"column":40},"source":"../../app.js","original":{"line":70,"column":33}},{"generated":{"line":74,"column":43},"source":"../../app.js","original":{"line":70,"column":36}},{"name":"originalUrl","generated":{"line":74,"column":44},"source":"../../app.js","original":{"line":70,"column":37}},{"generated":{"line":74,"column":55},"source":"../../app.js","original":{"line":70,"column":7}},{"generated":{"line":74,"column":77},"source":"../../app.js","original":{"line":70,"column":67}},{"generated":{"line":74,"column":80},"source":"../../app.js","original":{"line":70,"column":7}},{"generated":{"line":74,"column":81},"source":"../../app.js","original":{"line":70,"column":6}},{"generated":{"line":74,"column":82},"source":"../../app.js","original":{"line":70,"column":2}},{"generated":{"line":75,"column":0},"source":"../../app.js","original":{"line":71,"column":1}},{"generated":{"line":75,"column":1},"source":"../../app.js","original":{"line":68,"column":0}},{"generated":{"line":75,"column":4},"source":"../../app.js","original":{"line":73,"column":0}},{"name":"app","generated":{"line":77,"column":0},"source":"../../app.js","original":{"line":74,"column":0}},{"generated":{"line":77,"column":3},"source":"../../app.js","original":{"line":74,"column":3}},{"name":"use","generated":{"line":77,"column":4},"source":"../../app.js","original":{"line":74,"column":4}},{"generated":{"line":77,"column":7},"source":"../../app.js","original":{"line":74,"column":0}},{"name":"globalErrorController","generated":{"line":77,"column":8},"source":"../../app.js","original":{"line":74,"column":8}},{"generated":{"line":77,"column":29},"source":"../../app.js","original":{"line":74,"column":0}},{"name":"module","generated":{"line":78,"column":0},"source":"../../app.js","original":{"line":76,"column":0}},{"generated":{"line":78,"column":6},"source":"../../app.js","original":{"line":76,"column":6}},{"name":"exports","generated":{"line":78,"column":7},"source":"../../app.js","original":{"line":76,"column":7}},{"generated":{"line":78,"column":14},"source":"../../app.js","original":{"line":76,"column":0}},{"name":"app","generated":{"line":78,"column":17},"source":"../../app.js","original":{"line":76,"column":17}},{"generated":{"line":78,"column":20},"source":"../../app.js","original":{"line":76,"column":0}}],"sources":{"../../app.js":"//------- Express Framework ----------//\r\nconst path = require('path');\r\nconst express = require('express');\r\nconst morgan = require('morgan');\r\nconst rateLimit = require('express-rate-limit'); // rate limiting\r\nconst helmet = require('helmet');\r\nconst mongoSanitize = require('express-mongo-sanitize');\r\nconst xss = require('xss-clean');\r\nconst hpp = require('hpp');\r\nconst cookieParser = require('cookie-parser');\r\n\r\nconst productRouter = require('./routes/productRoutes');\r\nconst userRouter = require('./routes/userRoutes');\r\nconst viewRouter = require('./routes/viewRoutes');\r\nconst AppError = require('./utils/appError');\r\nconst globalErrorController = require('./controllers/errorController');\r\n\r\nconst app = express();\r\n\r\n// Setting pug for view template\r\napp.set('view engine', 'pug');\r\napp.set('views', path.join(__dirname, 'views'));\r\n\r\n//------------ GLOBAL MIDDLEWARE ---------//\r\n\r\n//------ Serving Static Files -------//\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\n// Security HTTP Headers\r\n//app.use(helmet());\r\n\r\nif (process.env.NODE_ENV === 'development' || 'production') {\r\n  app.use(morgan('dev'));\r\n}\r\n\r\n// // Rate Limiting to api request\r\n// const limiter = rateLimit({\r\n//   max: 100,\r\n//   windowMs: 60 * 60 * 1000,\r\n//   message: 'Too many request, please try again in an hour!!',\r\n// });\r\n// // Limiting req only to api route\r\n// app.use('/api', limiter);\r\n\r\n// Body parser, reading data from body in req.body\r\napp.use(express.json());\r\napp.use(cookieParser()); // It will add cookies to request \r\n\r\n// Data Sanitization against NoSQL query injection\r\napp.use(mongoSanitize());\r\n\r\n// Data Sanitization against XSS\r\napp.use(xss());\r\n\r\n// Test Middleware\r\napp.use((req, res, next) => {\r\n  console.log(req.cookies);\r\n  next();\r\n});\r\n\r\n//--------- Api Routes ----------//\r\napp.use('/', viewRouter);\r\napp.use('/api/v1/products', productRouter);\r\napp.use('/api/v1/users', userRouter);\r\n\r\n// Handling unhandled request\r\n// Handling req outside the app.\r\napp.all('*', (req, res, next) => {\r\n  // Sending Error to global error middleware.\r\n  next(new AppError(`Cant find ${req.originalUrl} on this server`, 404));\r\n});\r\n\r\n//--------- GLOBAL ERROR MIDDLEWARE -------//\r\napp.use(globalErrorController);\r\n\r\nmodule.exports = app;\r\n"},"lineCount":null}},"error":null,"hash":"4399d687da5a1f81e57ed5c14e3ca66f","cacheData":{"env":{"NODE_ENV":"development"}}}